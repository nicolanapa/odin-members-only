<% if (locals.messages) { %>

<ul>
    <% for (let i = 0; i < messages.length; i++) { %>
    <li>
        <% if (locals.user) { %>
        <% if (locals.user.membership_status === "member" || locals.user.admin === true) { %>
        <p>By <%= messages[i].email %>, posted at <%= messages[i].posted_date %></p>
        <% } %>
        <% } else { %>
        <p>By anonymous at anonymous date</p>
        <% } %>

        <h3><%= messages[i].title %></h3>
        <p><%= messages[i].content %></p>

        <% if (locals.user) { %>
        <% if (locals.user.admin === "true") { %>
        <form action="/delete/<%= messages[i].id %>" method="post">
            <button type="submit">Delete this Message</button>
        </form>
        <% } %>
        <% } %>
    </li>
    <% } %>
</ul>

<% } else { %>
<h2>No messages found.</h2>
<% } %>
